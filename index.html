<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fake Chat Messenger Premium</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; }
    body { background-color: #e9ecef; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; padding: 20px; gap: 30px; flex-wrap: wrap; }

    /* --- Control Panel --- */
    .control-panel { background: #fff; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 340px; display: flex; flex-direction: column; gap: 15px; }
    .control-panel h2 { font-size: 18px; border-bottom: 2px solid #006aff; padding-bottom: 10px; }
    .form-group { display: flex; flex-direction: column; gap: 5px; }
    .form-group label { font-size: 14px; font-weight: bold; color: #333; }
    .form-group input, .form-group select { padding: 8px; border: 1px solid #ccc; border-radius: 8px; font-size: 14px; }
    .radio-group { display: flex; gap: 10px; background: #f0f2f5; padding: 10px; border-radius: 8px; font-size: 13px; }
    .btn-action { background: #006aff; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s; }
    .btn-save { background: #28a745; margin-top: 10px; }

    /* --- Area Capture (Kotak Bersih) --- */
    #capture-area { 
        width: 380px; 
        height: 680px; 
        background-color: #fff; 
        display: flex; 
        flex-direction: column; 
        overflow: hidden; 
        box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
        position: relative; 
        border: 1px solid #ddd; 
    }
    
    .chat-header { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #e4e6eb; }
    .back-btn { color: #006aff; font-size: 20px; margin-right: 12px; }
    
    .profile-container { position: relative; width: 40px; height: 40px; margin-right: 10px; }
    .profile-pic { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
    .online-dot { position: absolute; bottom: 1px; right: 1px; width: 12px; height: 12px; background-color: #31a24c; border: 2px solid #fff; border-radius: 50%; display: none; }
    .is-online .online-dot { display: block; }

    .user-details h3 { font-size: 16px; font-weight: 700; color: #050505; }
    .user-details p { font-size: 13px; color: #65676b; }
    .header-icons { display: flex; flex: 1; justify-content: flex-end; gap: 18px; color: #006aff; font-size: 18px; }

    .chat-body { flex: 1; padding: 15px; overflow-y: auto; background: #fff; display: flex; flex-direction: column; }
    .message-row { display: flex; margin-bottom: 10px; align-items: flex-end; }
    .message-row.received { justify-content: flex-start; }
    .message-row.sent { justify-content: flex-end; }
    
    .mini-avatar-wrapper { position: relative; width: 30px; height: 30px; margin-right: 8px; flex-shrink: 0; }
    .chat-avatar-small { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
    .mini-online-dot { position: absolute; bottom: 0; right: 0; width: 9px; height: 9px; background-color: #31a24c; border: 1.5px solid #fff; border-radius: 50%; display: none; }
    .is-online .mini-online-dot { display: block; }

    .bubble { max-width: 72%; padding: 10px 14px; font-size: 16px; line-height: 1.4; word-wrap: break-word; }
    .received .bubble { background-color: #f0f2f5; color: #050505; border-radius: 18px; border-bottom-left-radius: 4px; }
    .sent .bubble { background-color: #0055ff; color: #fff; border-radius: 18px; border-bottom-right-radius: 4px; }
    
    .chat-img-attachment { max-width: 220px; border-radius: 15px; margin-top: 5px; border: 1px solid #ddd; }

    .chat-footer { padding: 12px; display: flex; align-items: center; gap: 10px; border-top: 1px solid #e4e6eb; color: #006aff; font-size: 20px; }
    .input-wrapper { flex: 1; background-color: #f0f2f5; border-radius: 20px; padding: 8px 12px; display: flex; align-items: center; }
    .input-wrapper input { border: none; background: transparent; outline: none; font-size: 16px; width: 100%; }
</style>
</head>
<body>

<div class="control-panel">
    <h2> Panel Kendali</h2>
    <div class="form-group">
        <label>Nama Lawan Bicara:</label>
        <input type="text" id="cp-name" value="Bayu Kurniawan">
    </div>

    <div class="form-group">
        <label>Pilih Status:</label>
        <select id="cp-status-select">
            <option value="Sedang Aktif">Sedang Aktif (On)</option>
            <option value="Aktif 1 jam yang lalu">Aktif 1 jam yang lalu (Off)</option>
            <option value="Aktif 2 jam yang lalu">Aktif 2 jam yang lalu</option>
            <option value="Aktif 3 jam yang lalu">Aktif 3 jam yang lalu</option>
            <option value="Aktif 4 jam yang lalu">Aktif 4 jam yang lalu</option>
            <option value="Aktif 5 jam yang lalu">Aktif 5 jam yang lalu</option>
            <option value="Aktif 6 jam yang lalu">Aktif 6 jam yang lalu</option>
            <option value="Aktif 7 jam yang lalu">Aktif 7 jam yang lalu</option>
            <option value="Aktif 8 jam yang lalu">Aktif 8 jam yang lalu</option>
            <option value="Aktif 9 jam yang lalu">Aktif 9 jam yang lalu</option>
            <option value="Aktif 10 jam yang lalu">Aktif 10 jam yang lalu</option>
            <option value="custom">Custom Teks...</option>
        </select>
        <input type="text" id="cp-status-custom" placeholder="Ketik status custom..." style="display:none; margin-top:5px;">
    </div>

    <div class="form-group">
        <label>Ganti Foto Profil:</label>
        <input type="file" id="cp-profile-pic" accept="image/*">
    </div>
    <div class="form-group">
        <label>Siapa yang mengirim?</label>
        <div class="radio-group">
            <label><input type="radio" name="sender" value="sent" checked> Saya</label>
            <label><input type="radio" name="sender" value="received"> Dia</label>
        </div>
    </div>
    <div class="form-group">
        <label>Kirim Gambar ke Chat:</label>
        <input type="file" id="cp-chat-image" accept="image/*">
        <button class="btn-action" id="btn-send-image">Kirim Gambar</button>
    </div>
    
    <button class="btn-action btn-save" id="btn-save-ss">
        <i class="fa-solid fa-camera-retro"></i> Simpan Gambar Chat (SS)
    </button>
    
    <button class="btn-action" style="background:#dc3545;" onclick="document.getElementById('chat-body').innerHTML=''">Bersihkan Chat</button>
</div>

<div id="capture-area">
    <div class="chat-header">
        <i class="fa-solid fa-arrow-left back-btn"></i>
        <div class="profile-container is-online" id="header-profile-container">
            <img src="https://i.pravatar.cc/150?img=12" class="profile-pic" id="header-pic">
            <div class="online-dot"></div>
        </div>
        <div class="user-details">
            <h3 id="header-name">Bayu Kurniawan</h3>
            <p id="header-status">Sedang Aktif</p>
        </div>
        <div class="header-icons">
            <i class="fa-solid fa-phone"></i>
            <i class="fa-solid fa-video"></i>
            <i class="fa-solid fa-circle-info"></i>
        </div>
    </div>

    <div class="chat-body" id="chat-body"></div>

    <div class="chat-footer">
        <i class="fa-solid fa-circle-plus"></i>
        <i class="fa-solid fa-camera"></i>
        <i class="fa-regular fa-image"></i>
        <i class="fa-solid fa-microphone"></i>
        <div class="input-wrapper">
            <input type="text" id="chat-input" placeholder="Pesan">
            <i class="fa-regular fa-face-smile"></i>
        </div>
        <i class="fa-solid fa-thumbs-up"></i>
    </div>
</div>

<script>
    const cpName = document.getElementById('cp-name');
    const headerName = document.getElementById('header-name');
    const cpStatusSelect = document.getElementById('cp-status-select');
    const cpStatusCustom = document.getElementById('cp-status-custom');
    const headerStatus = document.getElementById('header-status');
    const headerProfileContainer = document.getElementById('header-profile-container');
    const chatBody = document.getElementById('chat-body');
    const chatInput = document.getElementById('chat-input');
    const cpProfilePic = document.getElementById('cp-profile-pic');
    const headerPic = document.getElementById('header-pic');
    const btnSendImage = document.getElementById('btn-send-image');
    const cpChatImage = document.getElementById('cp-chat-image');
    const btnSaveSS = document.getElementById('btn-save-ss');

    let currentPic = "https://i.pravatar.cc/150?img=12";
    let isOnlineNow = true;

    function updateStatusUI() {
        const val = cpStatusSelect.value;
        if (val === 'custom') {
            cpStatusCustom.style.display = 'block';
            headerStatus.textContent = cpStatusCustom.value || "...";
            isOnlineNow = false;
        } else {
            cpStatusCustom.style.display = 'none';
            headerStatus.textContent = val;
            isOnlineNow = (val === 'Sedang Aktif');
        }
        headerProfileContainer.classList.toggle('is-online', isOnlineNow);
        document.querySelectorAll('.mini-avatar-wrapper').forEach(w => w.classList.toggle('is-online', isOnlineNow));
    }

    cpStatusSelect.addEventListener('change', updateStatusUI);
    cpStatusCustom.addEventListener('input', updateStatusUI);
    cpName.addEventListener('input', (e) => headerName.textContent = e.target.value);

    cpProfilePic.addEventListener('change', function(e) {
        const reader = new FileReader();
        reader.onload = (event) => {
            currentPic = event.target.result;
            headerPic.src = currentPic;
            document.querySelectorAll('.chat-avatar-small').forEach(img => img.src = currentPic);
        };
        reader.readAsDataURL(e.target.files[0]);
    });

    function createMessage(content, isMe, isImage = false) {
        const row = document.createElement('div');
        row.className = `message-row ${isMe ? 'sent' : 'received'}`;
        const innerContent = isImage ? `<img src="${content}" class="chat-img-attachment">` : `<div class="bubble">${content}</div>`;
        
        if (isMe) {
            row.innerHTML = innerContent;
        } else {
            row.innerHTML = `
                <div class="mini-avatar-wrapper ${isOnlineNow ? 'is-online' : ''}">
                    <img src="${currentPic}" class="chat-avatar-small">
                    <div class="mini-online-dot"></div>
                </div>
                ${innerContent}
            `;
        }
        chatBody.appendChild(row);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    chatInput.addEventListener('keypress', (e) => {
        if(e.key === 'Enter' && chatInput.value.trim() !== "") {
            const isMe = document.querySelector('input[name="sender"]:checked').value === 'sent';
            createMessage(chatInput.value, isMe);
            chatInput.value = "";
        }
    });

    btnSendImage.addEventListener('click', () => {
        if(!cpChatImage.files[0]) return;
        const reader = new FileReader();
        reader.onload = (e) => {
            const isMe = document.querySelector('input[name="sender"]:checked').value === 'sent';
            createMessage(e.target.result, isMe, true);
        };
        reader.readAsDataURL(cpChatImage.files[0]);
    });

    btnSaveSS.addEventListener('click', () => {
        html2canvas(document.getElementById('capture-area'), {
            useCORS: true,
            scale: 2,
            backgroundColor: "#ffffff"
        }).then(canvas => {
            const link = document.createElement('a');
            link.download = `FakeChat_Bayu_${Date.now()}.png`;
            link.href = canvas.toDataURL("image/png");
            link.click();
        });
    });
</script>

</body>
</html>